<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>TON TEMPLE</title>
  <style>
    :root{--bg:#070707;--gold:#d8b35a;--text:#f2f2f2}
    html,body{margin:0;height:100%;background:radial-gradient(1200px 800px at 50% 25%,#14110b 0%,var(--bg) 55%,#000 100%);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif}
    .safe{padding-top:env(safe-area-inset-top);padding-bottom:env(safe-area-inset-bottom);min-height:100%;display:flex;flex-direction:column}
    header{padding:18px 16px 10px;display:flex;align-items:center;justify-content:space-between;opacity:.95}
    .brand{display:flex;gap:10px;align-items:center}
    .badge{width:34px;height:34px;border-radius:50%;border:1px solid rgba(216,179,90,.55);box-shadow:0 0 24px rgba(216,179,90,.18);display:grid;place-items:center;color:var(--gold);font-weight:700}
    .brand-title{line-height:1.05}
    .brand-title b{letter-spacing:.8px}
    .brand-title small{display:block;opacity:.7;font-size:12px;margin-top:2px}
    main{flex:1;display:grid;place-items:center;padding:18px 16px}
    .card{width:min(420px,100%);border-radius:22px;border:1px solid rgba(216,179,90,.28);background:linear-gradient(180deg,rgba(20,17,11,.75),rgba(7,7,7,.75));box-shadow:0 20px 60px rgba(0,0,0,.55);padding:18px}
    .hero{height:260px;border-radius:18px;border:1px solid rgba(216,179,90,.22);background:radial-gradient(160px 120px at 50% 45%,rgba(216,179,90,.22),transparent 60%),radial-gradient(240px 180px at 50% 55%,rgba(216,179,90,.10),transparent 70%),linear-gradient(180deg,rgba(0,0,0,.25),rgba(0,0,0,.55));display:grid;place-items:center;position:relative;overflow:hidden}
    .hero:before{content:"";position:absolute;inset:-40%;background:conic-gradient(from 0deg,transparent 0 30%,rgba(216,179,90,.18) 40%,transparent 55% 100%);animation:spin 8s linear infinite;filter:blur(1px);opacity:.8}
    .sig{position:relative;width:140px;height:140px;border-radius:50%;border:1px solid rgba(216,179,90,.55);box-shadow:0 0 40px rgba(216,179,90,.18);display:grid;place-items:center;color:var(--gold);font-size:56px;font-weight:800;letter-spacing:1px;background:radial-gradient(circle at 30% 30%,rgba(216,179,90,.16),transparent 55%)}
    @keyframes spin{to{transform:rotate(360deg)}}
    .cta{margin-top:14px;display:grid;gap:10px}
    .btn{height:52px;border-radius:16px;border:1px solid rgba(216,179,90,.45);background:linear-gradient(180deg,rgba(216,179,90,.18),rgba(165,124,42,.10));color:var(--text);font-weight:650;letter-spacing:.4px;cursor:pointer;box-shadow:0 10px 26px rgba(0,0,0,.55)}
    .sub{opacity:.75;font-size:13px;line-height:1.35;text-align:center}
    .ritualBox{display:none;margin-top:14px;padding:14px;border-radius:16px;border:1px solid rgba(216,179,90,.22);background:rgba(0,0,0,.25)}
    .title{font-weight:800;letter-spacing:.6px;margin-bottom:8px}
    .meta{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:10px;opacity:.75;font-size:12px}
    .pill{border:1px solid rgba(216,179,90,.22);border-radius:999px;padding:6px 10px}
    .result{white-space:pre-line;line-height:1.45;font-size:14px}
    .row{display:flex;gap:10px;margin-top:12px}
    .btn2{flex:1;height:48px;border-radius:14px;border:1px solid rgba(216,179,90,.28);background:rgba(0,0,0,.22);color:var(--text);font-weight:650;cursor:pointer}
    footer{padding:14px 16px 18px;opacity:.55;font-size:12px;text-align:center}
  </style>
</head>
<body>
  <div class="safe">
    <header>
      <div class="brand">
        <div class="badge">Ë≤°</div>
        <div class="brand-title">
          <b>TON TEMPLE</b>
          <small>Black Gold Ritual Interface</small>
        </div>
      </div>
      <div style="opacity:.7;font-size:12px;">RU</div>
    </header>

    <main>
      <div class="card">
        <div class="hero"><div class="sig">Ë≤°</div></div>

        <div class="cta">
          <button class="btn" id="openRitual">üèÆ –û—Ç–∫—Ä—ã—Ç—å —Ä–∏—Ç—É–∞–ª</button>

          <div class="ritualBox" id="ritualScreen">
            <div class="title">RITUAL</div>
            <div class="meta">
              <div class="pill" id="ritualDate">–°–µ–≥–æ–¥–Ω—è</div>
              <div class="pill" id="ritualStatus">–î–æ—Å—Ç—É–ø–Ω–æ: 1/–¥–µ–Ω—å</div>
            </div>

            <div class="result" id="ritualText">–ù–∞–∂–º–∏ ¬´–ü–æ–ª—É—á–∏—Ç—å –∑–Ω–∞–∫¬ª, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –ø–æ—Å–ª–∞–Ω–∏–µ –¥–Ω—è.</div>

            <div class="row">
              <button class="btn2" id="getSign">–ü–æ–ª—É—á–∏—Ç—å –∑–Ω–∞–∫</button>
              <button class="btn2" id="backHome">‚Üê –ù–∞–∑–∞–¥</button>
            </div>

            <div class="sub" style="margin-top:10px;">v0.3 ‚Ä¢ random + daily limit</div>
          </div>

          <div class="sub">–ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω ‚Üí –†–∏—Ç—É–∞–ª ‚Üí –ó–Ω–∞–∫ –¥–Ω—è</div>
        </div>
      </div>
    </main>

    <footer>TON TEMPLE</footer>
  </div>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    const tg = window.Telegram?.WebApp;
    if (tg) { tg.ready(); tg.expand(); }

    const ritualScreen = document.getElementById("ritualScreen");
    const openBtn = document.getElementById("openRitual");
    const backBtn = document.getElementById("backHome");
    const getSignBtn = document.getElementById("getSign");
    const ritualText = document.getElementById("ritualText");
    const ritualStatus = document.getElementById("ritualStatus");
    const ritualDateEl = document.getElementById("ritualDate");

    const SIGNS = [
      "–°–µ–≥–æ–¥–Ω—è —Ç–≤–æ—è —Å–∏–ª–∞ ‚Äî –≤ –≤—ã–¥–µ—Ä–∂–∫–µ. –°–¥–µ–ª–∞–π —à–∞–≥ –º–µ–¥–ª–µ–Ω–Ω–æ, –Ω–æ —Ç–æ—á–Ω–æ.\n–ü–æ—Ç–æ–∫ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Ç–∞–º, –≥–¥–µ —Ç—ã –Ω–µ –¥–∞–≤–∏—à—å.",
      "–°–∏–≥–Ω–∞–ª –¥–Ω—è: –Ω–µ —É—Å–∫–æ—Ä—è–π —Å–æ–±—ã—Ç–∏—è. –°–Ω–∞—á–∞–ª–∞ –ø–æ—Ä—è–¥–æ–∫ ‚Äî –ø–æ—Ç–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç.\n–û–¥–∏–Ω –≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä —Å–∏–ª—å–Ω–µ–µ –¥–µ—Å—è—Ç–∏ –ø–æ–ø—ã—Ç–æ–∫.",
      "–°–µ–≥–æ–¥–Ω—è –ª—É—á—à–µ —É–∫—Ä–µ–ø–ª—è—Ç—å –ø–æ–∑–∏—Ü–∏–∏, —á–µ–º —Ä–∏—Å–∫–æ–≤–∞—Ç—å.\n–°–æ–±–µ—Ä–∏ —Ñ–∞–∫—Ç—ã ‚Äî –∏ —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–º –¥–µ–π—Å—Ç–≤—É–π.",
      "–î–µ–Ω—å –¥–ª—è —á–∏—Å—Ç–æ–≥–æ —Ñ–æ–∫—É—Å–∞. –£–±–µ—Ä–∏ –ª–∏—à–Ω–µ–µ, –æ—Å—Ç–∞–≤—å –≥–ª–∞–≤–Ω–æ–µ.\n–¢–æ–≥–¥–∞ –∑–Ω–∞–∫ —Å—Ç–∞–Ω–µ—Ç –æ—á–µ–≤–∏–¥–Ω—ã–º.",
      "–¢–≤–æ—è —É–¥–∞—á–∞ –≤–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—É.\n–ú–µ–Ω—å—à–µ —ç–º–æ—Ü–∏–π ‚Äî –±–æ–ª—å—à–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã."
    ];

    function todayKey(){
      const d = new Date();
      const y = d.getFullYear();
      const m = String(d.getMonth()+1).padStart(2,'0');
      const da = String(d.getDate()).padStart(2,'0');
      return `${y}-${m}-${da}`;
    }

    function loadDaily(){
      const key = "tt_daily_" + todayKey();
      try {
        const raw = localStorage.getItem(key);
        return raw ? JSON.parse(raw) : null;
      } catch(e) {
        localStorage.removeItem(key);
        return null;
      }
    }

    function saveDaily(payload){
      const key = "tt_daily_" + todayKey();
      localStorage.setItem(key, JSON.stringify(payload));
    }

    function updateUI(){
      const t = todayKey();
      ritualDateEl.textContent = t;

      const saved = loadDaily();
      if (saved?.text) {
        ritualText.textContent = saved.text;
        ritualStatus.textContent = "–ó–Ω–∞–∫ —É–∂–µ –ø–æ–ª—É—á–µ–Ω (—Å–µ–≥–æ–¥–Ω—è)";
        getSignBtn.disabled = true;
        getSignBtn.style.opacity = 0.55;
      } else {
        ritualText.textContent = "–ù–∞–∂–º–∏ ¬´–ü–æ–ª—É—á–∏—Ç—å –∑–Ω–∞–∫¬ª, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –ø–æ—Å–ª–∞–Ω–∏–µ –¥–Ω—è.";
        ritualStatus.textContent = "–î–æ—Å—Ç—É–ø–Ω–æ: 1/–¥–µ–Ω—å";
        getSignBtn.disabled = false;
        getSignBtn.style.opacity = 1;
      }
    }

    openBtn.addEventListener("click", () => {
      if (tg?.HapticFeedback) tg.HapticFeedback.impactOccurred("medium");
      ritualScreen.style.display = "block";
      openBtn.style.display = "none";
      updateUI();
    });

    backBtn.addEventListener("click", () => {
      if (tg?.HapticFeedback) tg.HapticFeedback.impactOccurred("light");
      ritualScreen.style.display = "none";
      openBtn.style.display = "block";
    });

    getSignBtn.addEventListener("click", () => {
      const saved = loadDaily();
      if (saved?.text) return;

      if (tg?.HapticFeedback) tg.HapticFeedback.notificationOccurred("success");
      const pick = SIGNS[Math.floor(Math.random() * SIGNS.length)];
      saveDaily({ text: pick, ts: Date.now() });
      updateUI();
    });
  </script>
</body>
</html>
