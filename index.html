<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>TON TEMPLE</title>
  <style>
    :root{
      --bg:#070707;
      --gold:#d8b35a;
      --gold2:#a57c2a;
      --text:#f2f2f2;
      --glass: rgba(12,10,6,.52);
      --line: rgba(216,179,90,.22);
      --line2: rgba(216,179,90,.35);
      --shadow: rgba(0,0,0,.62);
    }
    *{box-sizing:border-box}
    html,body{height:100%; margin:0}
    body{
      background:
        radial-gradient(1100px 900px at 50% 10%, rgba(216,179,90,.10), transparent 55%),
        radial-gradient(900px 700px at 50% 45%, rgba(216,179,90,.07), transparent 60%),
        radial-gradient(1200px 900px at 50% 105%, rgba(0,0,0,.85), rgba(0,0,0,.95)),
        linear-gradient(180deg,#080707,#000);
      color:var(--text);
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
      -webkit-user-select:none; user-select:none;
      overflow:hidden;
    }

    /* SAFE AREA */
    .app{
      height:100%;
      padding-top:env(safe-area-inset-top);
      padding-bottom:env(safe-area-inset-bottom);
      display:flex;
      flex-direction:column;
    }

    /* TOP BAR */
    .topbar{
      height:64px;
      padding:12px 12px 10px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .brand{
      display:flex; align-items:center; gap:10px; min-width:160px;
    }
    .logo{
      width:44px;height:44px;border-radius:50%;
      border:1px solid var(--line2);
      box-shadow:0 0 22px rgba(216,179,90,.16);
      background:
        radial-gradient(circle at 35% 30%, rgba(216,179,90,.20), transparent 55%),
        rgba(0,0,0,.35);
      display:grid; place-items:center;
      color:var(--gold); font-weight:900; font-size:22px;
    }
    .brandText{line-height:1.05}
    .brandText b{letter-spacing:.7px}
    .brandText small{display:block; opacity:.65; font-size:11px; margin-top:2px}

    .nav{
      flex:1;
      display:flex;
      justify-content:center;
      gap:10px;
      align-items:center;
    }
    .navpill{
      height:40px;
      padding:0 14px;
      border-radius:999px;
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(216,179,90,.08), rgba(0,0,0,.22));
      display:flex; align-items:center; gap:14px;
      box-shadow:0 10px 24px var(--shadow);
    }
    .navpill .item{
      font-size:12px;
      letter-spacing:1.2px;
      text-transform:uppercase;
      opacity:.85;
      cursor:pointer;
    }
    .navpill .item.active{opacity:1; color:var(--gold)}
    .right{
      display:flex; align-items:center; gap:8px; min-width:160px; justify-content:flex-end;
    }
    .chip{
      height:36px; padding:0 10px; border-radius:12px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.28);
      display:flex; align-items:center; gap:8px;
      font-size:12px; opacity:.9;
    }
    .ico{
      width:36px; height:36px; border-radius:12px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.28);
      display:grid; place-items:center;
      cursor:pointer;
    }

    /* SCENE (DRAGON + WHEEL PLACEHOLDER) */
    .scene{
      flex:1;
      padding:8px 12px 0;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:flex-start;
      gap:14px;
      position:relative;
    }
    .frame{
      width:min(520px, 100%);
      aspect-ratio: 1 / 1.05;
      border-radius:22px;
      border:1px solid var(--line);
      background:
        radial-gradient(260px 220px at 50% 40%, rgba(216,179,90,.10), transparent 60%),
        radial-gradient(800px 600px at 50% 55%, rgba(0,0,0,.40), rgba(0,0,0,.85)),
        rgba(0,0,0,.35);
      box-shadow:0 22px 80px rgba(0,0,0,.65);
      overflow:hidden;
      position:relative;
    }
    .frame:before{
      content:"";
      position:absolute; inset:-40%;
      background:conic-gradient(from 0deg, transparent 0 35%, rgba(216,179,90,.12) 45%, transparent 60% 100%);
      animation:spin 10s linear infinite;
      filter:blur(1px);
      opacity:.85;
    }
    @keyframes spin{to{transform:rotate(360deg)}}

    /* Placeholder circle where wheel will be */
    .wheelHolder{
      position:absolute;
      left:50%; top:55%;
      transform:translate(-50%,-50%);
      width:78%;
      aspect-ratio:1/1;
      border-radius:50%;
      border:1px solid rgba(216,179,90,.25);
      box-shadow:0 0 40px rgba(216,179,90,.12);
      background:
        radial-gradient(circle at 35% 30%, rgba(216,179,90,.12), transparent 55%),
        radial-gradient(circle at 50% 60%, rgba(0,0,0,.55), rgba(0,0,0,.85));
      display:grid; place-items:center;
      z-index:2;
    }
    .wheelHolder .mark{
      font-size:56px; font-weight:900; color:var(--gold); opacity:.9;
    }

    /* ACTIVATE FLOW button */
    .cta{
      width:min(520px, 100%);
      height:56px;
      border-radius:18px;
      border:1px solid rgba(216,179,90,.45);
      background:linear-gradient(180deg, rgba(216,179,90,.18), rgba(165,124,42,.10));
      box-shadow:0 14px 40px rgba(0,0,0,.7);
      color:var(--text);
      font-weight:800;
      letter-spacing:1.2px;
      text-transform:uppercase;
      cursor:pointer;
    }

    /* ORACLE / ALTAR tabs */
    .subtabs{
      width:min(520px, 100%);
      display:flex;
      gap:10px;
      justify-content:center;
      margin-top:-2px;
    }
    .subtabs .tab{
      flex:1;
      height:42px;
      border-radius:16px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.25);
      display:grid; place-items:center;
      letter-spacing:1.1px;
      font-size:12px;
      text-transform:uppercase;
      opacity:.9;
      cursor:pointer;
    }
    .subtabs .tab.active{
      border-color:rgba(216,179,90,.35);
      background:linear-gradient(180deg, rgba(216,179,90,.10), rgba(0,0,0,.28));
      color:var(--gold);
    }

    /* GUIDANCE PANEL */
    .panel{
      width:min(520px, 100%);
      border-radius:20px;
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(12,10,6,.58), rgba(0,0,0,.40));
      box-shadow:0 22px 70px rgba(0,0,0,.7);
      padding:14px;
      margin-top:6px;
    }
    .panelTop{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      margin-bottom:10px;
      font-size:12px;
      letter-spacing:1.1px;
      text-transform:uppercase;
      opacity:.85;
    }
    .seg{
      display:flex; gap:8px; align-items:center; flex-wrap:wrap;
    }
    .seg .pill{
      height:30px; padding:0 10px; border-radius:999px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.22);
      display:flex; align-items:center;
      font-size:12px; letter-spacing:.8px;
      opacity:.9;
    }
    .seg .pill.active{
      border-color:rgba(216,179,90,.35);
      color:var(--gold);
    }
    .body{
      font-size:13px;
      line-height:1.45;
      opacity:.9;
      margin-bottom:10px;
    }
    .metrics{
      display:flex; gap:8px; flex-wrap:wrap; margin-bottom:10px;
    }
    .metrics .m{
      height:30px; padding:0 10px; border-radius:999px;
      border:1px solid rgba(216,179,90,.18);
      background:rgba(0,0,0,.22);
      display:flex; align-items:center;
      font-size:12px; opacity:.85;
    }
    .actions{
      display:flex; gap:10px;
    }
    .actions button{
      flex:1;
      height:46px;
      border-radius:16px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.22);
      color:var(--text);
      font-weight:800;
      letter-spacing:1px;
      text-transform:uppercase;
      cursor:pointer;
      opacity:.95;
    }
    .footnote{
      margin-top:10px;
      font-size:11px;
      opacity:.6;
      text-align:center;
    }

    /* BOTTOM NAV */
    .bottom{
      padding:10px 12px 14px;
    }
    .dock{
      height:68px;
      border-radius:22px;
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(12,10,6,.60), rgba(0,0,0,.45));
      box-shadow:0 20px 70px rgba(0,0,0,.75);
      display:flex;
      align-items:center;
      justify-content:space-around;
      gap:8px;
      padding:10px;
    }
    .dock .d{
      flex:1;
      height:48px;
      border-radius:18px;
      border:1px solid transparent;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:2px;
      cursor:pointer;
      opacity:.88;
    }
    .dock .d b{
      font-size:11px;
      letter-spacing:1.2px;
      text-transform:uppercase;
    }
    .dock .d span{
      font-size:11px;
      opacity:.7;
      letter-spacing:.6px;
    }
    .dock .d.active{
      border-color:rgba(216,179,90,.30);
      background:rgba(216,179,90,.06);
      opacity:1;
      color:var(--gold);
    }

    /* small phones */
    @media (max-width:420px){
      .topbar{height:58px}
      .navpill{gap:10px; padding:0 10px}
      .navpill .item{font-size:11px}
      .logo{width:40px;height:40px}
      .frame{border-radius:20px}
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="topbar">
      <div class="brand">
        <div class="logo">Ë≤°</div>
        <div class="brandText">
          <b>TON TEMPLE</b>
          <small>Fa Cai Supreme AI</small>
        </div>
      </div>

      <div class="nav">
        <div class="navpill">
          <div class="item">MODE</div>
          <div class="item active">RITUAL</div>
          <div class="item">PRO</div>
          <div class="item">CN</div>
          <div class="item">EN</div>
        </div>
      </div>

      <div class="right">
        <div class="ico" title="Sound">üîä</div>
        <div class="ico" title="Help">?</div>
      </div>
    </div>

    <div class="scene">
      <div class="frame" aria-label="Dragon + Wheel scene">
        <div class="wheelHolder" id="wheel">
          <div class="mark">Ë≤°</div>
        </div>
      </div>

      <button class="cta" id="activate">ACTIVATE FLOW</button>

      <div class="subtabs">
        <div class="tab active">ORACLE</div>
        <div class="tab">GOLDEN ALTAR</div>
      </div>

      <div class="panel">
        <div class="panelTop">
          <div>FORECAST</div>
          <div class="seg">
            <div class="pill active">DAY</div>
            <div class="pill">TON</div>
            <div class="pill">LIMIT: <span id="limitTxt" style="margin-left:6px; opacity:.9">0/1</span></div>
          </div>
        </div>

        <div class="body" id="guidanceText">
          TEMPLE GUIDANCE:<br>
          Tap ORACLE to receive guidance.<br>
          Then choose: ENTER / WAIT / SKIP
        </div>

        <div class="metrics">
          <div class="m">Market Weather: CALM</div>
          <div class="m">RiskAura: LOW</div>
          <div class="m">Flow Window: OPEN</div>
        </div>

        <div class="actions">
          <button id="enterBtn">ENTER</button>
          <button id="waitBtn">WAIT</button>
          <button id="skipBtn">SKIP</button>
        </div>

        <div class="footnote">Ritualized interface. Not financial advice.</div>
      </div>
    </div>

    <div class="bottom">
      <div class="dock">
        <div class="d active"><span>ÊÆø</span><b>RITUAL</b></div>
        <div class="d"><span>ËΩÆ</span><b>WHEEL</b></div>
        <div class="d"><span>Ë∞ï</span><b>ORACLE</b></div>
        <div class="d"><span>Âùõ</span><b>ALTAR</b></div>
      </div>
    </div>
  </div>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    const tg = window.Telegram?.WebApp;
    if (tg){ tg.ready(); tg.expand(); }

    // daily limit (same rule as before)
    const limitTxt = document.getElementById("limitTxt");
    const guidanceText = document.getElementById("guidanceText");
    const activate = document.getElementById("activate");

    const SIGNS = [
      "–°–∏–≥–Ω–∞–ª –¥–Ω—è: –¥–µ—Ä–∂–∏ —Ç–µ–º–ø. –°–Ω–∞—á–∞–ª–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Äî –ø–æ—Ç–æ–º –¥–∞–≤–ª–µ–Ω–∏–µ.",
      "–°–∏–≥–Ω–∞–ª –¥–Ω—è: –Ω–µ —Ä–∞—Å–ø–ª–µ—Å–∫–∞–π –≤–Ω–∏–º–∞–Ω–∏–µ. –û–¥–∏–Ω —à–∞–≥ ‚Äî –æ–¥–∏–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç.",
      "–°–∏–≥–Ω–∞–ª –¥–Ω—è: —É–¥–∞—á–∞ –ª—é–±–∏—Ç —Ç–æ—á–Ω–æ—Å—Ç—å. –°–æ–∫—Ä–∞—Ç–∏ –ª–∏—à–Ω–µ–µ.",
      "–°–∏–≥–Ω–∞–ª –¥–Ω—è: —É–∫—Ä–µ–ø–ª—è–π –ø–æ–∑–∏—Ü–∏–∏. –†–∏—Å–∫ ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —è—Å–Ω–æ—Å—Ç–∏.",
      "–°–∏–≥–Ω–∞–ª –¥–Ω—è: –¥–µ–π—Å—Ç–≤—É–π, –∫–æ–≥–¥–∞ –æ–∫–Ω–æ –æ—Ç–∫—Ä—ã—Ç–æ. –ù–µ —Ä–∞–Ω—å—à–µ."
    ];

    function todayKey(){
      const d = new Date();
      const y = d.getFullYear();
      const m = String(d.getMonth()+1).padStart(2,'0');
      const da = String(d.getDate()).padStart(2,'0');
      return `${y}-${m}-${da}`;
    }
    function loadDaily(){
      const key = "tt_daily_" + todayKey();
      try { return JSON.parse(localStorage.getItem(key) || "null"); }
      catch(e){ localStorage.removeItem(key); return null; }
    }
    function saveDaily(payload){
      const key = "tt_daily_" + todayKey();
      localStorage.setItem(key, JSON.stringify(payload));
    }
    function updateLimit(){
      const saved = loadDaily();
      if (saved?.text){
        limitTxt.textContent = "1/1";
        guidanceText.innerHTML = "TEMPLE GUIDANCE:<br><br>" + saved.text.replaceAll("\n","<br>");
      } else {
        limitTxt.textContent = "0/1";
      }
    }

    activate.addEventListener("click", ()=>{
      if (tg?.HapticFeedback) tg.HapticFeedback.impactOccurred("medium");
      const saved = loadDaily();
      if (saved?.text) return;
      const pick = SIGNS[Math.floor(Math.random()*SIGNS.length)];
      saveDaily({text: pick, ts: Date.now()});
      if (tg?.HapticFeedback) tg.HapticFeedback.notificationOccurred("success");
      updateLimit();
    });

    updateLimit();
  </script>
</body>
</html>
